<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Riesgos Laborales</title>
</head>
<style>
body {
    font-family: Arial, sans-serif;
    height: 100%;
}

.quiz-container {
    margin-bottom: 20px;
}

.quiz-body {
    margin-bottom: 10px;
}

.quiz-footer {
    display: flex;
    justify-content: center;
}

.result-container {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100px;
}

.traffic-light {
    display: flex;
    justify-content: center;
    align-items: center;
}

.traffic-light .light {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    margin: 0 10px;
}

.traffic-light .red {
    background-color: red;
}

.traffic-light .yellow {
    background-color: yellow;
}

.traffic-light .green {
    background-color: green;
}

.traffic-light .blue {
    background-color: blue;
}

</style>
<body>
    <div class="p-8 mt-8 sm:w-1/2 md:w-1/3 mx-auto border border-red-500 rounded-lg" id="quiz">
        <div class="quiz-body">
            <h2 id="question" class="font-semibold text-2xl mb-4">Preguntas</h2>
            <ul>
                <li>
                    <input type="radio" name="answer" id="a" class="answer" />
                    <label for="a" id="a_text">Siempre o casi siempre</label>
                </li>
                <li>
                    <input type="radio" name="answer" id="b" class="answer" />
                    <label for="b" id="b_text">A menudo</label>
                </li>
                <li>
                    <input type="radio" name="answer" id="c" class="answer" />
                    <label for="c" id="c_text">A veces</label>
                </li>
                <li>
                    <input type="radio" name="answer" id="d" class="answer" />
                    <label for="d" id="d_text">Nunca o casi nunca</label>
                </li>
            </ul>
        </div>
        <div class="quiz-footer">
            <button type="button" id="btn" class="bg-red-500 hover:bg-zinc-900 hover:text-red-500 p-2 rounded-lg">Enviar</button>
        </div>
    </div>
    <div class="result-container" id="result">
        <!-- Traffic light will be displayed here -->
    </div>
</body>
</html>
<script src="https://cdn.tailwindcss.com"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script> -->
<script>
    
const quizData = [
    // Example question structure
    {
        question: "¿Trabajas los domingos y festivos?",
        a: "Siempre o casi siempre",
        b: "A menudo",
        c: "A veces",
        d: "Nunca o casi nunca",
        scores: {a: 1, b: 2, c: 3, d: 4},
    },
    {
        question: "¿Dispones de al menos 48 horas consecutivas de descanso en el transcurso de una semana (7 días consecutivos)?",
        a: "Siempre o casi siempre",
        b: "A menudo",
        c: "A veces",
        d: "Nunca o casi nunca",
        scores: {a: 4, b: 3, c: 2, d: 1},
    },
    {
        question: "¿Tu horario laboral te permite compaginar tu tiempo libre (vacaciones, días libres, horarios de entrada y salida) con los de tu familia y amistades?",
        a: "Siempre o casi siempre",
        b: "A menudo",
        c: "A veces",
        d: "Nunca o casi nunca",
        scores: {a: 4, b: 3, c: 2, d: 1},
    },
    {
        question: "¿Puedes marcar tu propio ritmo de trabajo a lo largo de la jornada laboral?",
        a: "Siempre o casi siempre",
        b: "A menudo",
        c: "A veces",
        d: "Nunca o casi nunca",
        scores: {a: 4, b: 3, c: 2, d: 1},
    },
    {
        question: "En general, la cantidad de trabajo que tienes es:",
        a: "Excesiva",
        b: "Elevada",
        c: "Adecuada",
        d: "Escasa",
        scores: {a: 1, b: 2, c: 3, d: 4},
    },
    {
        question: "El trabajo que realizas, ¿te resulta complicado o difícil?",
        a: "Siempre o casi siempre",
        b: "A menudo",
        c: "A veces",
        d: "Nunca o casi nunca",
        scores: {a: 1, b: 2, c: 3, d: 4},
    },
    {
        question: "El trabajo que realizas, ¿te resulta rutinario?",
        a: "No",
        b: "A veces",
        c: "Bastante",
        d: "Mucho",
        scores: {a: 4, b: 3, c: 2, d: 1},
    },
    {
        question: "En general, ¿consideras que las tareas que realizas tienen sentido?",
        a: "Mucho",
        b: "Bastante",
        c: "Poco",
        d: "Nada",
        scores: {a: 4, b: 3, c: 2, d: 1},
    },
    {
        question: "En general, ¿está tu trabajo reconocido y apreciado por...? El público, client@s, pasajer@s, etc.",
        a: "Siempre o casi siempre",
        b: "A menudo",
        c: "A veces",
        d: "Nunca o casi nunca",
        scores: {a: 4, b: 3, c: 2, d: 1},
    },
    {
        question: "Considerando los deberes y responsabilidades de tu trabajo, ¿estás satisfech@ con el salario que recibes?",
        a: "Muy satisfecho",
        b: "Satisfecho",
        c: "Insatisfecho",
        d: "Muy insatisfecho",
        scores: {a: 4, b: 3, c: 2, d: 1},
    },
    
];

const quiz = document.querySelector(".quiz-body");
const answerEl = document.querySelectorAll(".answer");
const questionEl = document.getElementById("question");
const resultEl = document.getElementById("result");
const btnSubmit = document.getElementById("btn");

let currentQuiz = 0;
let score = 0;

loadQuiz();

function loadQuiz() {
    deselectAnswers();
    const currentQuizData = quizData[currentQuiz];
    questionEl.innerText = currentQuizData.question;
    document.getElementById('a_text').innerText = currentQuizData.a;
    document.getElementById('b_text').innerText = currentQuizData.b;
    document.getElementById('c_text').innerText = currentQuizData.c;
    document.getElementById('d_text').innerText = currentQuizData.d;
}

function deselectAnswers() {
    answerEl.forEach((answerEl) => {
        answerEl.checked = false;
    });
}

function getSelected() {
    let answer;
    answerEl.forEach((answerEls) => {
        if (answerEls.checked) {
            answer = answerEls.id;
        }
    });
    return answer;
}

btnSubmit.addEventListener("click", function () {
    const answers = getSelected();
    if (answers) {
        const currentQuestion = quizData[currentQuiz];
        const selectedScore = currentQuestion.scores[answers];
        score += selectedScore;
        nextQuestion();
    }
});

function nextQuestion() {
    currentQuiz++;
    if (currentQuiz < quizData.length) {
        loadQuiz();
    } else {
        displayTrafficLight();
    }
}

function displayTrafficLight() {
    resultEl.innerHTML = '';
    if (score < 15) {
        resultEl.innerHTML = '<div class="traffic-light"><div class="light red"></div></div><p>Trabajas más que un japonés en huelga</p>';
    } else if (score < 25) {
        resultEl.innerHTML = '<div class="traffic-light"><div class="light yellow"></div></div><p>Trabajas más que el butanero de Hitler</p>';
    } else if (score < 35) {
        resultEl.innerHTML = '<div class="traffic-light"><div class="light green"></div></div><p>Trabajas menos que los intermitentes del tren</p>';
    } else {
        resultEl.innerHTML = '<div class="traffic-light"><div class="light blue"></div></div><p>Trabajas menos que el sastre de Tarzán</p>';
    }
}
</script>
